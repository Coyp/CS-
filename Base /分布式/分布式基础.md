# 基本

## 一致性哈希

- 解决服务器增加或者删除出现的哈希值重哈希的问题
- 将哈希值分布在圆环上, 根据顺时针进行分配

# 分布式协议

## Paxos

### 角色
proposal + accept + leaner  

### 流程
1.准备阶段  
2.接受阶段  
这个算法还是看图理解吧

### 与 zab 区别
zab:构建一个高可用的分布式数据主备系统，例如ZooKeeper
paxos:构建一个分布式的一致性状态机系统


## Raft

### 角色
leader + follower + candidate  

### 流程

#### 崩溃恢复

1.核心在于每个成员都有一个随机的时间，若在此时间内收不到保活消息，follower就会变成candidate，重新进行leader投票，先投票的可以向其他成员索要票  
2.数据的恢复交给业务层去保障  

#### 消息广播

类似两阶段提交，都交给leader处理，再给follower  

### 数据同步

1.来自客户端的修改都会先发到leader  
2.由leader将修改发给所以的follow  
3.等超过一半的follow也进行了修改，才将修改提交  
4.此时leader会通知所有的follow也提交修改  


# 应用
## memcahced  
1.服务器之间并不能互相通信，因此分布式是通过客户端的一致性哈希算法保证  

## HDFS 
1.默认存储三个副本，其中两个副本放在同一个机架上，减少跨机架拷贝数据（受机架之间的带宽影响，同一个接入层下的服务器之间带宽为1Gb，不同接入层交换机下的服务器之间带宽小于1Gb）  
